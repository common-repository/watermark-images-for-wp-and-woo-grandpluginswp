(()=>{function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}!function(t){"use strict";var a=window.gpls_wmfw_watermark_image_for_wordpress_localize_vars;t(document).on("ready",(function(e){new s}));var s=function(){function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.fetchedPosts=[],this.savedPosts={},this.fetchCPTPostsXHR=null,this.cpts=[],this.posts=[],this.foundImagesPages=1,this.foundImages={},this.selectedImagesDirect=[],this.selectedImagesCPTs=[],this.selectedImages=[],this.applyWatermarksTemplateData={},this.events(),this.initSelect2()}var l,n;return l=s,n=[{key:"events",value:function(){var e=this;t(".main-loader").hide(),t(".main-loader .fetching-data").addClass("d-none"),t('[data-toggle="tooltip"]').tooltip(),t("."+a.classes_prefix+"-selected-images-direct-sortable").sortable(),t("#watermarks-template-selection").on("change",(function(a){var s=t(a.target),l=parseInt(s.val());l?(t(".apply-watermarks-template-settings-wrapper .step-2").collapse("show"),e.applyWatermarksTemplateData.templateID=l):(t(".apply-watermarks-template-settings-wrapper .step-2").collapse("hide"),e.applyWatermarksTemplateData.templateID=0)})),t(".apply-watermarks-template-selection-direct").on("click",(function(s){var l;s.preventDefault(),t(s.target).data("context");var n,o,i,d={title:a.labels.select_images,library:(n={orderby:"date",query:!0,post_mime_type:["image/*"]},o="gpls-wmfw-watermark-image-for-wordpress-context-modal",i="create-watermark-template",o in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,n),button:{text:a.labels.select_images},multiple:!0};(l=wp.media(d)).open(),l.on("select",(function(a){var s=l.state().get("selection").toJSON();s.forEach((function(t){e.selectedImagesDirect.push(t.id)})),e.selectedImages=e.selectedImagesDirect,e.insertSelectedDirectImages(s),t(".step-3").collapse("show")}))})),t(document).on("click","."+a.classes_prefix+"-selected-images-direct .frame-remove",(function(a){var s=t(a.target);s.hasClass(".frame-remove")||(s=s.parents(".frame-remove"));var l=s.data("id"),n=e.selectedImagesDirect.indexOf(parseInt(l));n>-1&&(e.selectedImagesDirect.splice(n,1),s.parents(".img-item").remove(),e.selectedImages=e.selectedImagesDirect,e.selectedImages.length||t(".step-3").collapse("hide"))})),t("#apply-watermarks-image-sizes-option-original").on("change",(function(e){var a=t(e.target);2==t(".apply-watermarks-template-type:checked").val()&&(a.is(":checked")?t(".create-backup-option").collapse("show"):t(".create-backup-option").collapse("hide"))})),t(document).on("change",".apply-watermarks-template-type",(function(a){var s=t(a.target).val(),l=t("#apply-watermarks-image-sizes-option-original");e.applyWatermarksTemplateData.applyTemplateType=s,2==s?(l.is(":checked")&&t(".create-backup-option").collapse("show"),t(".original-image-size-option").collapse("show"),t(".image-sizes-options-overwrite").collapse("show"),t(".image-sizes-options-new").collapse("hide")):(t(".create-backup-option").collapse("hide"),t(".original-image-size-option").collapse("hide"),t(".image-sizes-options-overwrite").collapse("hide"),t(".image-sizes-options-new").collapse("show")),t(".apply-watermarks-template-apply-subsizes-options").collapse("show")})),t(".select-images-by-option").on("change",(function(a){var s=t(a.target).val();e.applyWatermarksTemplateData.selectImageType=s,t("#select-images-by-"+s).collapse("show").siblings(".select-images-by-option-content").collapse("hide"),"cpt"===s?e.selectedImages=e.selectedImagesCPTs:"direct"===s&&(e.selectedImages=e.selectedImagesDirect),e.selectedImages.length?(t(".step-3").collapse("show"),e.applyWatermarksTemplateData.imageSizes&&e.applyWatermarksTemplateData.imageSizes.length&&t(".step-4").collapse("show")):t(".step-3").collapse("hide")})),t(".apply-watermarks-create-backup-option").on("change",(function(a){var s=t(a.target).is(":checked");e.applyWatermarksTemplateData.createBackup=s})),t(".apply-watermarks-image-sizes-options-all").on("change",(function(e){var a=t(e.target).is(":checked");t(".apply-watermarks-image-sizes-option").prop("checked",a).trigger("change")})),t(".apply-watermarks-image-sizes-option").on("change",(function(a){var s=[],l=t(".apply-watermarks-image-sizes-option");t.each(l,(function(e,a){var l=t(a),n=l.val();l.is(":checked")&&s.push(n)})),e.applyWatermarksTemplateData.imageSizes=s,s.length?t(".step-4").collapse("show"):t(".step-4").collapse("hide")})),t('input[name="user_mapping_type"]').on("change",(function(e){t("#user-mapping-single-author").prop("checked")?t("#user-mapping-single-author-select").val()?t(".last-step-submit").prop("disabled",!1):t(".last-step-submit").prop("disabled",!0):t(".last-step-submit").prop("disabled",!1)})),t("#user-mapping-single-author-select").on("change",(function(e){t(e.target).val()?t(".last-step-submit").prop("disabled",!1):t(".last-step-submit").prop("disabled",!0)})),t(".taxonomy-select-all-checkbox").on("click",(function(e){var a=t(e.target),s=a.parent("label").prev("select");1==a.prop("checked")?s.find("option").prop("selected",!0):s.find("option").prop("selected",!1)})),t(document).on("change",".cpt-terms-select, .cpt-authors-select, .cpt-start-date-select, .cpt-end-date-select, .cpt-statuses-select",(function(t){e.foundImages={}})),t(".select-list-all-tab").on("click",(function(a){var s=t(a.target).data("cpt");e.fetchedPosts[s]&&e.fetchedPosts[s][1]||e.fetchCPTPost(s,1)})),t(".all-cpt-posts-pagination .next-page").on("click",(function(a){var s=t(a.target);s.hasClass("button")||(s=s.parent());var l=s.data("cpt"),n=t("#all-posts-pagination-"+l),o=s.closest(".gpls-all-posts-list-wrapper"),i=parseInt(n.find(".total-pages").data("pages")),d=parseInt(n.find(".current-page").text())+1;n.find(".current-page").text(d),o.find(".cb-select-all-1").prop("checked",!1),e.fetchedPosts[l]&&e.fetchedPosts[l][d]?e.updateListPostsTable(l,e.fetchedPosts[l][d],!0):(e.toggleLoader(l,"show"),e.fetchCPTPost(l,d)),d>=i&&(n.find(".next-page").addClass("disabled"),n.find(".last-page").addClass("disabled")),n.find(".prev-page").removeClass("disabled"),n.find(".first-page").removeClass("disabled")})),t(".all-cpt-posts-pagination .last-page").on("click",(function(a){var s=t(a.target);s.hasClass("button")||(s=s.parent());var l=s.data("cpt"),n=t("#all-posts-pagination-"+l),o=s.closest(".gpls-all-posts-list-wrapper"),i=(parseInt(n.find(".total-pages").data("pages")),parseInt(n.find(".current-page").text()),parseInt(s.data("paged")));n.find(".current-page").text(i),o.find(".cb-select-all-1").prop("checked",!1),e.fetchedPosts[l]&&e.fetchedPosts[l][i]?e.updateListPostsTable(l,e.fetchedPosts[l][i],!0):(e.toggleLoader(l,"show"),e.fetchCPTPost(l,i)),n.find(".next-page").addClass("disabled"),n.find(".last-page").addClass("disabled"),n.find(".prev-page").removeClass("disabled"),n.find(".first-page").removeClass("disabled")})),t(".all-cpt-posts-pagination .first-page").on("click",(function(a){var s=t(a.target);s.hasClass("button")||(s=s.parent());var l=s.data("cpt"),n=t("#all-posts-pagination-"+l),o=s.closest(".gpls-all-posts-list-wrapper");parseInt(n.find(".total-pages").data("pages")),parseInt(n.find(".current-page").text()),n.find(".current-page").text(1),o.find(".cb-select-all-1").prop("checked",!1),e.fetchedPosts[l]&&e.fetchedPosts[l][1]?e.updateListPostsTable(l,e.fetchedPosts[l][1],!0):(e.toggleLoader(l,"show"),e.fetchCPTPost(l,1)),n.find(".next-page").removeClass("disabled"),n.find(".last-page").removeClass("disabled"),n.find(".prev-page").addClass("disabled"),n.find(".first-page").addClass("disabled")})),t(".all-cpt-posts-pagination .prev-page").on("click",(function(a){var s=t(a.target);s.hasClass("button")||(s=s.parent());var l=s.data("cpt"),n=s.closest(".gpls-all-posts-list-wrapper"),o=t("#all-posts-pagination-"+l),i=(parseInt(o.find(".total-pages").data("pages")),parseInt(o.find(".current-page").text())-1);o.find(".current-page").text(i),n.find(".cb-select-all-1").prop("checked",!1),e.fetchedPosts[l]&&e.fetchedPosts[l][i]?e.updateListPostsTable(l,e.fetchedPosts[l][i],!0):(e.toggleLoader(l,"show"),e.fetchCPTPost(l,i)),i<=1&&(o.find(".prev-page").addClass("disabled"),o.find(".first-page").addClass("disabled")),o.find(".next-page").removeClass("disabled"),o.find(".last-page").removeClass("disabled")})),t(".current-page").on("keypress",(function(a){var s=event.keyCode?event.keyCode:event.which,l=t(a.target).data("cpt"),n=t("#all-posts-pagination-"+l),o=parseInt(n.find(".total-pages").data("pages")),i=parseInt(n.find(".current-page").val());"13"==s&&(a.preventDefault(),i>0?(e.fetchedPosts[l]&&e.fetchedPosts[l][i]?e.updateListPostsTable(l,e.fetchedPosts[l][i],!0):(e.toggleLoader(l,"show"),e.fetchCPTPost(l,i)),n.find(".next-page").removeClass("disabled"),n.find(".last-page").removeClass("disabled"),n.find(".prev-page").removeClass("disabled"),n.find(".first-page").removeClass("disabled"),i<=1?(n.find(".prev-page").addClass("disabled"),n.find(".first-page").addClass("disabled")):i>o&&(n.find(".next-page").removeClass("disabled"),n.find(".last-page").removeClass("disabled"))):i>o?n.find(".current-page").val(o):i<1&&n.find(".current-page").val(1))})),t(document).on("change",".cpt-name-checkbox",(function(a){var s=t(a.target),l=s.val(),n=s.is(":checked"),o=t(".select-images-by-post-type-"+l+"-wrapper");o.length&&o.collapse(n?"show":"hide"),e.foundImages={}})),t(document).on("change",".cpt-select-type-radio",(function(e){var a=t(e.target),s=a.closest(".subtitle").find(".cpt-select-type-radio").not(a);t(s.data("bs-target")).collapse("hide")})),t(document).on("change",".cb-select-all-1",(function(e){var a=t(e.target),s=a.parents(".wp-list-table"),l=a.is(":checked");t.each(s.find(".cb-select-all"),(function(e,a){t(a).prop("checked",l).trigger("change")}))})),t(document).on("change",".gpls-all-posts-list-wrapper .cb-select-all",(function(a){var s=t(a.target);e.selectCheckedPost(s),e.foundImages={}})),t(document).on("change","#modal-found-images-watermarks-template .cb-select-all",(function(a){var s=t(a.target);e.updateSelectedImages(s)})),t(document).on("click",".remove-selected-post",(function(a){var s=t(a.target),l=parseInt(s.data("id")),n=s.data("cpt"),o=e.savedPosts[n].indexOf(l);o>-1&&e.savedPosts[n].splice(o,1),e.updateFetchedPostCheckedStatus(n,l,!1);var i=t("#cb-select-all-"+n+"-"+l);i.length&&i.prop("checked",!1),s.parents(".selected-posts-list-row").remove()})),t(".specific-posts-modal").on("hidden.bs.modal",(function(a){var s=t(a.target).data("cpt"),l=t(".cpt_select_specific_posts_"+s);e.savedPosts[s]?l.val(e.savedPosts[s].join(",")):l.val("")})),t(".specific-posts-modal").on("shown.bs.modal",(function(e){t(e.currentTarget).find(".select-list-all-tab").trigger("click")})),t(".search-for-images-in-posts").on("click",(function(a){if(a.preventDefault(),t(".selected-images-watermarks-template-modal").modal("show"),e.foundImages[1]){var s=t(".selected-images-watermarks-template-modal .actions");e.updateListFoundImages(e.foundImages[1],s,1,e.foundImagesPages,!0)}else e.findImagesByPosts()})),t(".selected-images-watermarks-template-modal .next-page").on("click",(function(a){var s=t(a.target);s.hasClass("button")||(s=s.parent());var l=t(".selected-images-watermarks-template-modal .actions"),n=parseInt(l.find(".total-pages").data("pages")),o=parseInt(l.find(".current-page").text())+1;e.foundImages[o]?e.updateListFoundImages(e.foundImages[o],l,o,n,!0):e.findImagesByPosts(o)})),t(".selected-images-watermarks-template-modal .prev-page").on("click",(function(a){var s=t(a.target);s.hasClass("button")||(s=s.parent());var l=t(".selected-images-watermarks-template-modal .all-found-images-pagination"),n=parseInt(l.find(".total-pages").data("pages")),o=parseInt(l.find(".current-page").text())-1;l.find(".current-page").val(o),e.foundImages[o]?e.updateListFoundImages(e.foundImages[o],l,o,n,!0):e.findImagesByPosts(o)})),t(".selected-images-watermarks-template-modal .first-page").on("click",(function(a){var s=t(a.target);s.hasClass("button")||(s=s.parent());var l=t(".selected-images-watermarks-template-modal .all-found-images-pagination"),n=parseInt(l.find(".total-pages").data("pages"));l.find(".current-page").val(1),e.foundImages[1]?e.updateListFoundImages(e.foundImages[1],l,1,n,!0):e.findImagesByPosts(1)})),t(".selected-images-watermarks-template-modal .last-page").on("click",(function(a){var s=t(a.target);s.hasClass("button")||(s=s.parent());var l=t(".selected-images-watermarks-template-modal .all-found-images-pagination"),n=parseInt(l.find(".total-pages").data("pages")),o=parseInt(s.data("paged"));l.find(".current-page").val(o),e.foundImages[o]?e.updateListFoundImages(e.foundImages[o],l,o,n,!0):e.findImagesByPosts(o)})),t(document).on("click",".apply-watermarks-template-submit-btn",(function(t){t.preventDefault(),e.applyWatermarksTemplate()})),t(document).on("click",".wp-list-select-posts-table .toggle-row",(function(){t(this).closest("tr").toggleClass("is-expanded")})),t(document).on("click",".close-modal-btn",(function(e){e.preventDefault(),t(e.target).closest(".bulk-apply-modal").modal("hide")}))}},{key:"initSelect2",value:function(){t(".cpt-terms-select").each((function(e){var s,l,n,o;s=t(this).attr("id"),l=t(this).data("cpt_type"),n=t(this).data("tax_name"),(o=t("#"+s)).length&&o.select2({placeholder:a.labels.search_term,width:"200px",cache:!0,multiple:!1,allowClear:!0,ajax:{method:"post",url:a.ajaxUrl,dataType:"json",delay:500,data:function(e){return{term:e.term,cpt:l,tax:n,action:a.searchCPTTermsAction}},processResults:function(e){var t=[];return e.data.length&&(t=e.data),{results:t}}},minimumInputLength:3})}))}},{key:"insertSelectedDirectImages",value:function(e){var s=t("."+a.classes_prefix+"-selected-images-direct");e.forEach((function(e){var t=s.find(".img-item-clone").clone().removeClass("img-item-clone d-none").addClass("img-item"),l=e.editLink;(l=new URL(l)).searchParams.set(a.classes_prefix+"-force-img-refresh",(Math.random()+1).toString(36).substring(7)),t.find(".frame-remove").attr("data-id",e.id),t.find("a").attr("href",l.href),t.find("img").attr("src",e.sizes.thumbnail?e.sizes.thumbnail.url:e.url),s.append(t)}))}},{key:"setupPagination",value:function(e,t,a){e.find(".first-page").data("paged",1),e.find(".current-page").text(t),e.find(".total-pages").data("pages",a).text(a),e.find(".next-page").data("paged",t+1),e.find(".last-page").data("paged",a),e.find(".next-page").removeClass("disabled"),e.find(".last-page").removeClass("disabled"),e.find(".prev-page").removeClass("disabled"),e.find(".first-page").removeClass("disabled"),t<=1&&(e.find(".prev-page").addClass("disabled"),e.find(".first-page").addClass("disabled"),a<=1&&(e.find(".next-page").addClass("disabled"),e.find(".last-page").addClass("disabled"))),t>=a&&(e.find(".next-page").addClass("disabled"),e.find(".last-page").addClass("disabled"),a<=1&&(e.find(".prev-page").addClass("disabled"),e.find(".first-page").addClass("disabled")))}},{key:"calculatePosition",value:function(e){e.width,e.height}},{key:"selectCheckedPost",value:function(e){var a=e.data("cpt"),s=e.parents(".all-posts-list-row"),l=parseInt(e.data("id")),n={id:l,title:s.find(".column-title strong").text(),date:s.find(".column-date strong").text()};if(this.updateFetchedPostCheckedStatus(a,l,!0),e.is(":checked"))this.savedPosts[a]||(this.savedPosts[a]=[]),this.savedPosts[a].includes(l)||(this.savedPosts[a].push(l),this.insertSelectedPost(a,n));else{var o=this.savedPosts[a].indexOf(l);o>-1&&(this.savedPosts[a].splice(o,1),Object.keys(this.savedPosts[a]).length||delete this.savedPosts[a]),t("#post-selected-"+l).remove()}}},{key:"updateFetchedPostCheckedStatus",value:function(e,t,a){for(var s in this.fetchedPosts[e])for(var l in this.fetchedPosts[e][s])l==t&&(this.fetchedPosts[e][s][t].isChecked=a)}},{key:"updateSelectedImages",value:function(e){var a=parseInt(e.data("id"));if(e.is(":checked"))this.selectedImagesCPTs.includes(a)||(this.selectedImagesCPTs.push(a),this.selectedImages=this.selectedImagesCPTs);else{var s=this.selectedImagesCPTs.indexOf(a);s>-1&&(this.selectedImagesCPTs.splice(s,1),this.selectedImages=this.selectedImagesCPTs)}this.selectedImages.length?(t(".step-3").collapse("show"),this.applyWatermarksTemplateData.imageSizes&&this.applyWatermarksTemplateData.imageSizes.length&&t(".step-4").collapse("show")):t(".step-3").collapse("hide")}},{key:"updateListFoundImages",value:function(e,a,s,l){var n=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=t(".selected-images-watermarks-template-modal"),d=i.find(".wp-list-table").find("tbody");d.html(e),o&&t.each(i.find(".cb-select-all"),(function(e,a){var s=t(a),l=parseInt(s.data("id"));n.selectedImages.includes(l)?s.prop("checked",!0):s.prop("checked",!1)})),e.length?t(".step-3").collapse("show"):t(".step-3").collapse("hide"),this.setupPagination(a,s,l)}},{key:"insertSelectedPost",value:function(e,a){var s=t("#selected-posts-"+e+" table tbody"),l='<tr class="iedit selected-posts-list-row" id="post-selected-'+a.id+'" >\n                    <td class="title column-title column-primary page-title" data-colname="Title">\n                        <strong>'+a.title+'</strong>\n                        <button type="button" class="toggle-row"></button>\n                    </td>\n                    <td class="date column-date page-date" data-colname="Date">\n                        <strong>'+a.date+'</strong>\n                    </td>\n                    <td class="actions column-actions page-actions" data-colname="Actions">\n                        <button data-id="'+a.id+'" type="button" class="remove-selected-post btn btn-danger" data-cpt="'+e+'">Remove</button>\n                    </td>\n                </tr>';s.append(l)}},{key:"fetchCPTPost",value:function(e,s){var l=this;t("#all-posts-"+e),this.toggleLoader(e,"show"),null!=this.fetchCPTPostsXHR&&this.fetchCPTPostsXHR.abort(),this.fetchCPTPostsXHR=t.ajax({method:"POST",url:a.ajaxUrl,data:{action:a.selectCptListAction,nonce:a.nonce,cpt:e,paged:s},success:function(t){t.success&&1==t.success&&(l.fetchedPosts[e]||(l.fetchedPosts[e]={}),l.fetchedPosts[e][s]=t.data,l.updateListPostsTable(e,t.data))},error:function(e){403==e.status&&location.reload()},complete:function(){l.toggleLoader(e,"hide")}})}},{key:"findImagesByPosts",value:function(){var e=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,l=[],n={},o={},i={},d={},c={},r={},p={};t(".cpt-name-checkbox:checked").each((function(e,a){l.push(t(a).val())})),t(".cpt-select-type-radio:checked").each((function(e,a){var s=t(a).data("cpt_type"),l=t(a).val();n[s]=l})),t(".cpt_select_specific_posts").each((function(e,a){if(t(a).closest(".cpt-name-row").find(".cpt-name-checkbox").is(":checked")){var s=t(a).data("cpt_type"),l=t(a).val();o[s]=l}})),t(".cpt-terms-select").each((function(e,a){var s=t(a).data("cpt_type"),l=t(a).data("tax_name"),n=t(a).val();null==i[s]&&(i[s]={}),i[s][l]=n})),t(".cpt-statuses-select").each((function(e,a){var s=t(a).data("cpt_type"),l=t(a).val();d[s]=l})),t(".cpt-authors-select").each((function(e,a){var s=t(a).data("cpt_type"),l=t(a).val();c[s]=l})),t(".cpt-start-date-select").each((function(e,a){var s=t(a).data("cpt_type"),l=t(a).val();r[s]=l})),t(".cpt-end-date-select").each((function(e,a){var s=t(a).data("cpt_type"),l=t(a).val();p[s]=l}));var g={paged:s,action:a.findImagesInPostsAction,nonce:a.nonce,cpt_name:l,cpt_select_type:n,cpt_specific_posts:o,cpt_name_terms:i,cpt_statuses:d,cpt_authors:c,cpt_start_date:r,cpt_end_date:p};t(".step-4").collapse("hide"),this.toggleLoader("found-images","show"),t.ajax({method:"POST",url:a.ajaxUrl,data:g,success:function(a){var l,n;if(!a.success&&null!=a&&null!==(l=a.data)&&void 0!==l&&l.message)return e.showToast(a.data.message,"bg-"+a.data.status),void t("#modal-found-images-watermarks-template").modal("hide");if(null!=a&&null!==(n=a.data)&&void 0!==n&&n.result){var o=a.data.result,i=t("#modal-found-images-watermarks-template"),d=o.attachments_count,c=i.find(".actions"),r=Math.ceil(d/20);c.find(".displaying-num").text(d+" items"),e.updateListFoundImages(o.html,c,s,r,!1);var p=Object.values(o.attachments_ids).map((function(e){return parseInt(e)}));1===s&&(e.selectedImagesCPTs=p,e.selectedImages=p,e.foundImagesPages=r),e.foundImages[s]=o.html,e.applyWatermarksTemplateData.imageSizes&&e.applyWatermarksTemplateData.imageSizes.length&&t(".step-4").collapse("show")}},error:function(e){t(".select-errors-dialog").html(e.responseText).dialog("open")},complete:function(){e.toggleLoader("found-images","hide")}})}},{key:"applyWatermarksTemplate",value:function(){var e=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.toggleLoader("","show",!0);var l=Math.ceil(this.selectedImages.length/parseInt(a.offsetLength));0==s&&(t(".main-loader .loader-progress").val(0),t(".main-loader .loader-progress-num").removeClass("d-none").text("0%"));var n={action:a.applyWatermarksTemplateAction,nonce:a.nonce,images:this.selectedImages,step:s,totalSteps:l,options:this.applyWatermarksTemplateData};t.ajax({method:"POST",url:a.ajaxUrl,data:n,success:function(a){var s,n,o;if(null!=a&&a.data&&null!=a&&null!==(s=a.data)&&void 0!==s&&s.message&&a.data.message.length&&(null!=a&&null!==(n=a.data)&&void 0!==n&&n.errors&&a.data.errors.length?e.combinedToast(a.data.message,"bg-"+a.data.status,a.data.errors):e.showToast(null==a||null===(o=a.data)||void 0===o?void 0:o.message,"bg-"+a.data.status)),!1===a.success&&e.toggleLoader("","hide"),a.data.status&&a.success)if("end"===a.data.step)t(".main-loader .loader-progress").val(100),t(".main-loader .loader-progress-num").text("100%"),setTimeout((function(){e.toggleLoader("","hide")}),2e3);else{var i=Math.round(100*parseFloat(parseInt(a.data.step)/l));t(".main-loader .loader-progress").val(i),t(".main-loader .loader-progress-num").text(i+"%"),e.applyWatermarksTemplate(a.data.step)}},error:function(t){var a;null!=t&&null!==(a=t.data)&&void 0!==a&&a.message&&e.showToast(t.data.message,"bg-danger")}})}},{key:"loading",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t?(e.addClass("disabled").prop("disabled",!0),e.siblings(".spinner").addClass("is-active")):(e.removeClass("disabled").prop("disabled",!1),e.siblings(".spinner").removeClass("is-active disabled"))}},{key:"toggleLoader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1?arguments[1]:void 0,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(""==e)var l=t(".main-loader");else l="found-images"==e?t(".selected-images-watermarks-template-modal").find(".loader"):t("#all-posts-"+e).find(".loader");"show"==a?l.show():"hide"==a&&l.hide(),s?(l.find(".loader-progress").removeClass("d-none"),l.find(".loader-progress-num").removeClass("d-none")):(l.find(".loader-progress").addClass("d-none"),l.find(".loader-progress-num").addClass("d-none"))}},{key:"updateListPostsTable",value:function(e,a){var s=t("#all-posts-"+e),l='<tbody id="the-list-'+e+'">';for(var n in s.find(".wp-list-table").find("tbody").remove(),a){var o=a[n];this.savedPosts[e]&&this.savedPosts[e].includes(o.id)?o.isChecked=!0:o.isChecked=!1,l+=this.fetchedPostRow(e,o)}l+="</tbody",s.find(".wp-list-table").append(l)}},{key:"fetchedPostRow",value:function(e,t){return'<tr id="post-'+t.id+'" class="iedit all-posts-list-row">\n                <th scope="row" class="check-column">\n                    <input '+(t.isChecked?"checked":"")+' data-cpt="'+e+'" type="checkbox" class="cb-select-all cb-select-all-post-'+e+'" name="cb-select-all-post-'+e+'[]" id="cb-select-all-'+e+"-"+t.id+'" data-id="'+t.id+'">\n                </th>\n                <td class="title column-title column-primary page-title overflow-hidden" data-colname="Title">\n                    <strong class="mt-1"><a href="'+t.edit_link+'" target="_blank" >'+t.title+'</a></strong>\n                    <button type="button" class="toggle-row"></button>\n                </td>\n                <td class="date column-date page-date" data-colname="Date">\n                    <strong>'+t.date+"</strong>\n                </td>\n            </tr>"}},{key:"showToast",value:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bg-primary",l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t("."+a.classes_prefix+"-msgs-toast");n.removeClass((function(e,t){return(t.match(/(^|\s)bg-\S+/g)||[]).join(" ")}));var o="";l?(o='<ul class="toast-notice-list p-4">',e.forEach((function(e){o+='<li class="notice-item"><p> - '+e+"</p></li>"})),o+="</ul>"):o="<p>"+e+"</p>",n.addClass(s).find(".toast-body").html(o),n.toast({autohide:!1}),n.toast("show")}},{key:"combinedToast",value:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bg-primary",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=t("."+a.classes_prefix+"-msgs-toast");n.removeClass((function(e,t){return(t.match(/(^|\s)bg-\S+/g)||[]).join(" ")}));var o="<p>"+e+"</p>";l.length&&(o+='<ul class="toast-notice-list p-4 bg-danger mt-4 overflow-scroll" style="max-height:600px;">',l.forEach((function(e){o+='<li class="notice-item"><p> - '+e+"</p></li>"})),o+="</ul>"),n.addClass(s).find(".toast-body").html(o),n.toast({autohide:!1}),n.toast("show")}}],n&&e(l.prototype,n),Object.defineProperty(l,"prototype",{writable:!1}),s}()}(jQuery)})();